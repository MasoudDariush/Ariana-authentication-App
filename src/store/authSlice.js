import { createSlice } from "@reduxjs/toolkit";

const initialState = {
  token: localStorage.getItem("token") || null,
  user: JSON.parse(localStorage.getItem("user")) || null,
};

const authSlice = createSlice({
  name: "auth",
  initialState,
  reducers: {
    loginSuccess: (state, action) => {
      state.token = action.payload;
      localStorage.setItem("token", action.payload);
    },
    setUser: (state, action) => {
      state.user = action.payload;
      localStorage.setItem("user", JSON.stringify(action.payload));
    },
    logout: (state) => {
      state.token = null;
      state.user = null;
      localStorage.removeItem("token");
      localStorage.removeItem("user");
    },
  },
});

export const { loginSuccess, setUser, logout } = authSlice.actions;
export default authSlice.reducer;

/*
Ø¨Ø®Ø´ 1: Ø§ÛŒÙ† Ø®Ø· Ú†ÛŒÙ‡ØŸ
import { createSlice } from "@reduxjs/toolkit";

ðŸ”¹ ÙˆØ§Ú˜Ù‡ import ÛŒØ¹Ù†ÛŒ Ú†ÛŒØŸ

import Ø¯Ø± Ø¬Ø§ÙˆØ§Ø§Ø³Ú©Ø±ÛŒÙ¾Øª ÛŒØ¹Ù†ÛŒ:
"Ù…Ù† Ø¯Ø§Ø±Ù… Ú†ÛŒØ²ÛŒ Ø±Ø§ Ø§Ø² ÛŒÚ© ÙØ§ÛŒÙ„ ÛŒØ§ Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡ ÙˆØ§Ø±Ø¯ Ø§ÛŒÙ† ÙØ§ÛŒÙ„ Ù…ÛŒâ€ŒÚ©Ù†Ù… ØªØ§ Ø¨ØªÙˆØ§Ù†Ù… Ø§Ø² Ø¢Ù† Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†Ù…."

ðŸ”¹ createSlice Ú†ÛŒÙ‡ØŸ

Ø§ÛŒÙ† ÛŒÚ© ØªØ§Ø¨Ø¹ Ø§Ø³Øª Ú©Ù‡ Ø§Ø² Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡ Redux Toolkit Ù…ÛŒâ€ŒØ¢ÛŒØ¯.
Ú©Ø§Ø±Ø´ Ø§ÛŒÙ†Ù‡ Ú©Ù‡:

ÛŒÚ© Ø¨Ø®Ø´ Ø§Ø² Ø­Ø§Ù„Øª Ø¨Ø±Ù†Ø§Ù…Ù‡ (state) Ø¨Ø³Ø§Ø²Ø¯

Ù‡Ù…Ø±Ø§Ù‡ Ø¨Ø§:

Ù…Ù‚Ø¯Ø§Ø± Ø§ÙˆÙ„ÛŒÙ‡

ØªÙˆØ§Ø¨Ø¹ ØªØºÛŒÛŒØ±â€ŒØ¯Ù‡Ù†Ø¯Ù‡ (reducers)

Ø§Ø³Ù… Ø¢Ù† Ø¨Ø®Ø´

Ø¨Ù‡ Ø²Ø¨Ø§Ù† Ø³Ø§Ø¯Ù‡:
createSlice ÛŒÚ© Ø¬Ø¹Ø¨Ù‡ Ù…ÛŒâ€ŒØ³Ø§Ø²Ø¯ Ú©Ù‡ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ùˆ Ø±ÙˆØ´â€ŒÙ‡Ø§ÛŒ ØªØºÛŒÛŒØ± Ø¢Ù† Ø±Ø§ Ø¯Ø§Ø®Ù„Ø´ Ù‚Ø±Ø§Ø± Ù…ÛŒâ€ŒØ¯Ù‡Ø¯.

ðŸŸ¥ Ø¨Ø®Ø´ 2: initialState
const initialState = {
  token: localStorage.getItem("token") || null,
  user: JSON.parse(localStorage.getItem("user")) || null,
};


Ø®Ø·â€ŒØ¨Ù‡â€ŒØ®Ø·:

ðŸ”¸ const ÛŒØ¹Ù†ÛŒ Ú†ÛŒØŸ
const


ÛŒØ¹Ù†ÛŒ ÛŒÚ© Ù…ØªØºÛŒØ± ØªØ¹Ø±ÛŒÙ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ… Ú©Ù‡ Ù…Ù‚Ø¯Ø§Ø±Ø´ Ø±Ø§ Ù†Ù…ÛŒ ØªÙˆØ§Ù†ÛŒÙ… Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªØºÛŒÛŒØ± Ø¯Ù‡ÛŒÙ… (Ø§Ù…Ø§ Ø¯Ø§Ø®Ù„Ø´ Ù‚Ø§Ø¨Ù„ ØªØºÛŒÛŒØ± Ø§Ø³Øª).

ðŸ”¸ initialState ÛŒØ¹Ù†ÛŒ Ú†ÛŒØŸ

ÛŒÚ© Ø§Ø³Ù… Ø§Ø³ØªØŒ Ù‡Ø± Ú†ÛŒØ²ÛŒ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø³Øª Ø¨Ø§Ø´Ø¯.
Ø§ÛŒÙ† Ø§Ø³Ù… ÛŒØ¹Ù†ÛŒ: "ÙˆØ¶Ø¹ÛŒØª Ø§ÙˆÙ„ÛŒÙ‡".

ðŸ”¸ token: localStorage.getItem("token") || null

Û° ØªØ§ Û±Û°Û° ØªÙˆØ¶ÛŒØ­:

ðŸ“Œ localStorage Ú†ÛŒÙ‡ØŸ

ÛŒÚ© ÙØ¶Ø§ÛŒ Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¯Ø§Ø®Ù„ Ù…Ø±ÙˆØ±Ú¯Ø± Ø§Ø³Øª.
Ø§Ú¯Ø± ØªÙˆÚ©Ù† Ø±Ø§ Ø¯Ø± Ø¢Ù† Ø¨Ú¯Ø°Ø§Ø±ÛŒØŒ Ø­ØªÛŒ Ø§Ú¯Ø± ØµÙØ­Ù‡ Ø±Ø§ Ø±ÙØ±Ø´ Ú©Ù†ÛŒ Ù¾Ø§Ú© Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯.

ðŸ“Œ getItem("token")

Ø§ÛŒÙ† ØªØ§Ø¨Ø¹ Ù…Ù‚Ø¯Ø§Ø± Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡ Ø¨Ø§ Ø§Ø³Ù… "token" Ø±Ø§ Ø¨Ø±Ù…ÛŒâ€ŒÚ¯Ø±Ø¯Ø§Ù†Ø¯.
Ø§Ú¯Ø± Ú†ÛŒØ²ÛŒ Ù¾ÛŒØ¯Ø§ Ù†Ú©Ù†Ø¯ â†’ null

ðŸ“Œ || null ÛŒØ¹Ù†ÛŒ Ú†ÛŒØŸ

Ø§ÛŒÙ† Ø¯Ø± Ø¬Ø§ÙˆØ§Ø§Ø³Ú©Ø±ÛŒÙ¾Øª ÛŒØ¹Ù†ÛŒ:

Ø§Ú¯Ø± Ù‚Ø³Ù…Øª Ø§ÙˆÙ„ Ù…Ù‚Ø¯Ø§Ø± Ø¯Ø§Ø´Øª â†’ Ù‡Ù…Ø§Ù† Ø±Ø§ Ø¨Ø¯Ù‡
Ø§Ú¯Ø± Ù†Ø¯Ø§Ø´Øª â†’ null Ø¨Ø¯Ù‡

Ù¾Ø³ Ø§ÛŒÙ† Ø®Ø· ÛŒØ¹Ù†ÛŒ:

Ø§Ú¯Ø± ØªÙˆÚ©Ù†ÛŒ Ø¯Ø± localStorage Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡ Ø¨Ø§Ø´Ø¯ â†’ Ù‡Ù…Ø§Ù† Ø±Ø§ Ø¨Ú¯ÛŒØ±

Ø§Ú¯Ø± Ù†Ù‡ â†’ Ù…Ù‚Ø¯Ø§Ø± token = null Ø´ÙˆØ¯

ðŸ”¸ user: JSON.parse(localStorage.getItem("user")) || null

Ø§ÛŒÙ† Ù‡Ù… Ø¯Ù‚ÛŒÙ‚Ø§Ù‹ Ù…Ø«Ù„ Ù‚Ø¨Ù„ÛŒ Ø§Ø³ØªØŒ
Ø¨Ø§ Ø§ÛŒÙ† ØªÙØ§ÙˆØª Ú©Ù‡:

ðŸ“Œ JSON.parse(...) ÛŒØ¹Ù†ÛŒ Ú†ÛŒØŸ

Ø§Ú¯Ø± ÛŒÚ© Ø±Ø´ØªÙ‡ JSON Ù…Ø«Ù„
"{ name: 'Ali', age: 22 }"
Ø¯Ø± localStorage Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡ Ø¨Ø§Ø´Ø¯ØŒ Ø§ÛŒÙ† Ù¾Ø§Ø±Ø³Ø´ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ Ùˆ ØªØ¨Ø¯ÛŒÙ„Ø´ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ Ø¨Ù‡ ÛŒÚ© Ø¢Ø¨Ø¬Ú©Øª ÙˆØ§Ù‚Ø¹ÛŒ Ø¬Ø§ÙˆØ§Ø§Ø³Ú©Ø±ÛŒÙ¾Øª.

Ù¾Ø³:

Ø§Ú¯Ø± localStorage Ù…Ù‚Ø¯Ø§Ø± Ø¯Ø§Ø´Øª â†’ Ø¢Ø¨Ø¬Ú©Øª Ú©Ø§Ø±Ø¨Ø±

Ø§Ú¯Ø± Ù†Ø¯Ø§Ø´Øª â†’ null

ðŸŸ¥ Ø¨Ø®Ø´ 3: createSlice
const authSlice = createSlice({

ðŸ”¸ Ø§ÛŒÙ† Ú†ÛŒ Ù…ÛŒâ€ŒØ³Ø§Ø²Ø¯ØŸ

ÛŒÚ© Ø¢Ø¨Ø¬Ú©Øª Ù…ÛŒâ€ŒØ³Ø§Ø²Ø¯ Ú©Ù‡ Ø´Ø§Ù…Ù„:

Ù†Ø§Ù… Ø§ÛŒÙ† Ø¨Ø®Ø´ Ø§Ø² Redux

Ù…Ù‚Ø¯Ø§Ø± Ø§ÙˆÙ„ÛŒÙ‡

ØªÙˆØ§Ø¨Ø¹ ØªØºÛŒÛŒØ±â€ŒØ¯Ù‡Ù†Ø¯Ù‡ state

Ù¾Ø³ authSlice ÛŒÚ© Ù…ÙˆØ¬ÙˆØ¯ÛŒØª Ø¨Ø²Ø±Ú¯ Ø§Ø³Øª Ú©Ù‡ Ø¨Ù‡ Redux Ù…ÛŒâ€ŒÚ¯ÙˆÛŒØ¯:
"Ø§ÛŒÙ† Ø¨Ø®Ø´ Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ø±Ø¨Ø± Ùˆ ØªÙˆÚ©Ù† Ø§Ø³Øª."

Ø§Ø¯Ø§Ù…Ù‡â€ŒØ§Ø´:
  name: "auth",


Ø§ÛŒÙ† ÙÙ‚Ø· Ø§Ø³Ù… Ø§ÛŒÙ† Ø¨Ø®Ø´ Ø§Ø³Øª.
Ø¯Ø§Ø®Ù„ Redux Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† Ù†Ø§Ù… Ø¨Ø®Ø´ state.

  initialState,


Ø§ÛŒÙ†Ø¬Ø§ Ù…Ù‚Ø¯Ø§Ø± Ø§ÙˆÙ„ÛŒÙ‡ state ØªØ¹ÛŒÛŒÙ† Ù…ÛŒâ€ŒØ´ÙˆØ¯.
ÛŒØ¹Ù†ÛŒ:

state = { token: ..., user: ... }

  reducers: {


Ø§ÛŒÙ†Ø¬Ø§ ØªÙ…Ø§Ù… ØªÙˆØ§Ø¨Ø¹ÛŒ Ú©Ù‡ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù†Ø¯ state Ø±Ø§ ØªØºÛŒÛŒØ± Ø¨Ø¯Ù‡Ù†Ø¯ Ù†ÙˆØ´ØªÙ‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯.

Ø§ÛŒÙ†â€ŒÙ‡Ø§ Ù…Ø«Ù„ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒÛŒ Ù‡Ø³ØªÙ†Ø¯ Ú©Ù‡ ÙˆÙ‚ØªÛŒ ØµØ¯Ø§ Ø²Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ØŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ ØªØºÛŒÛŒØ± Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯.

ðŸŸ¥ Ø¨Ø®Ø´ 4: reducerÙ‡Ø§
ðŸ“Œ reducer ÛŒØ¹Ù†ÛŒ Ú†ÛŒØŸ

ÛŒÚ© ØªØ§Ø¨Ø¹ Ú©Ù‡:

state ÙØ¹Ù„ÛŒ Ø±Ø§ Ù…ÛŒâ€ŒÚ¯ÛŒØ±Ø¯

action (Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¯Ø³ØªÙˆØ±) Ø±Ø§ Ù…ÛŒâ€ŒÚ¯ÛŒØ±Ø¯

state Ø±Ø§ ØªØºÛŒÛŒØ± Ù…ÛŒâ€ŒØ¯Ù‡Ø¯

ðŸ”¹ reducer Ø´Ù…Ø§Ø±Ù‡ 1: loginSuccess
loginSuccess: (state, action) => {

Ø§ÛŒÙ† ØªØ§Ø¨Ø¹ Ú†Ù‡ Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒ Ù…ÛŒâ€ŒÚ¯ÛŒØ±Ø¯ØŸ

state â†’ Ø¯Ø§Ø¯Ù‡â€ŒÛŒ ÙØ¹Ù„ÛŒ (token, user)

action â†’ Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒ Ú©Ù‡ Ø§Ø² Ø¨ÛŒØ±ÙˆÙ† Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…

Ù…Ø«Ù„Ø§Ù‹:
action.payload = "token-123"

Ø¯Ø§Ø®Ù„Ø´:
state.token = action.payload;


ØªÙˆÚ©Ù† ÙØ¹Ù„ÛŒ Ø±Ø§ Ø¨Ø±Ø§Ø¨Ø± payload Ù…ÛŒâ€ŒÚ¯Ø°Ø§Ø±Ø¯.

localStorage.setItem("token", action.payload);


Ø§ÛŒÙ† Ø®Ø· Ù‡Ù…Ø§Ù† Ù…Ù‚Ø¯Ø§Ø± Ø±Ø§ Ø¯Ø± Ù…Ø±ÙˆØ±Ú¯Ø± Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.

Ù¾Ø³ Ú©Ø§Ø± loginSuccess Ø§ÛŒÙ† Ø§Ø³Øª:

ØªÙˆÚ©Ù† Ø±Ø§ ÙˆØ§Ø±Ø¯ Redux state Ù…ÛŒâ€ŒÚ©Ù†Ø¯

ØªÙˆÚ©Ù† Ø±Ø§ Ø¯Ø± localStorage Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯

ðŸ”¹ reducer Ø´Ù…Ø§Ø±Ù‡ 2: setUser
setUser: (state, action) => {
  state.user = action.payload;
  localStorage.setItem("user", JSON.stringify(action.payload));
},

Ú†Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ØŸ

Û±. Ù…Ù‚Ø¯Ø§Ø± user Ø±Ø§ Ø¯Ø± state Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯
Û². Ø¢Ù† Ø±Ø§ Ø¯Ø± localStorage Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯
(Ú†ÙˆÙ† Ø¢Ø¨Ø¬Ú©Øª Ø§Ø³Øª Ø¨Ø§ÛŒØ¯ JSON.stringify Ø´ÙˆØ¯)

ðŸ”¹ reducer Ø´Ù…Ø§Ø±Ù‡ 3: logout
logout: (state) => {
  state.token = null;
  state.user = null;
  localStorage.removeItem("token");
  localStorage.removeItem("user");
},

Ø¯Ù‚ÛŒÙ‚Ø§Ù‹ Ú†Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ø¯ØŸ

ØªÙˆÚ©Ù† Ø±Ø§ null Ù…ÛŒâ€ŒÚ©Ù†Ø¯

Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø± Ø±Ø§ null Ù…ÛŒâ€ŒÚ©Ù†Ø¯

ØªÙˆÚ©Ù† Ø±Ø§ Ø§Ø² localStorage Ù¾Ø§Ú© Ù…ÛŒâ€ŒÚ©Ù†Ø¯

Ú©Ø§Ø±Ø¨Ø± Ø±Ø§ Ù¾Ø§Ú© Ù…ÛŒâ€ŒÚ©Ù†Ø¯

Ø§ÛŒÙ† ÛŒØ¹Ù†ÛŒ: Ø®Ø±ÙˆØ¬ Ú©Ø§Ù…Ù„ Ø§Ø² Ø­Ø³Ø§Ø¨.

ðŸŸ¥ Ø¨Ø®Ø´ 5: Ø®Ø±ÙˆØ¬ÛŒ Slice
export const { loginSuccess, setUser, logout } = authSlice.actions;

Ú†ÛŒ Ù‡Ø³Øª Ø§ÛŒÙ†ØŸ

Ø§ÛŒÙ† Ø³Ù‡ ØªØ§Ø¨Ø¹ Ø§Ø² Ø¯Ø§Ø®Ù„ slice Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯.
Ù‡Ø± ÙˆÙ‚Øª Login Ù„Ø§Ø²Ù… Ø´ÙˆØ¯ â†’ loginSuccess() Ø±Ø§ ØµØ¯Ø§ Ù…ÛŒâ€ŒØ²Ù†ÛŒÙ….

export default authSlice.reducer;

reducer Ú†ÛŒÙ‡ Ø§ÛŒÙ†Ø¬Ø§ØŸ

Ø§ÛŒÙ† Ù‡Ù…Ø§Ù† Ø¨Ø®Ø´ "ØªØºÛŒÛŒØ± state" Ø§Ø³Øª Ùˆ Ø¨Ù‡ Redux Store ØªØ­ÙˆÛŒÙ„ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.

*/
